---
name: article-skill-generator
description: Generates article_templates and tone_guidelines skills from pattern analysis results. A meta-skill that creates other skills based on analyzing your existing articles. Used by template-generator agent.
---

# Article Skill Generator (Meta-Skill)

This is a **meta-skill** that generates other skills (`article_templates` and `tone_guidelines`) based on pattern analysis results from your existing articles.

## 1. Purpose

Generate customized writing guidelines and templates by analyzing patterns extracted from your own articles.

**Input**: JSON output from `pattern_extraction` skill
**Output**: Two dynamic skills (`article_templates` and `tone_guidelines`)

## 2. Input Requirements

This skill expects JSON input from `pattern_extraction` skill with the following structure:

```json
{
  "analysis_metadata": {
    "total_articles": number,
    "platforms": {
      "platform_name": number
    },
    "analyzed_at": "YYYY-MM-DD HH:MM:SS"
  },
  "categories": [
    {
      "platform": "string",
      "category_name": "string",
      "article_count": number,
      "percentage": number,
      "section_patterns": ["string"],
      "average_sections": number,
      "common_section_names": ["string"]
    }
  ],
  "tone_patterns": {
    "writing_style": {
      "form": "desu/masu | da/dearu",
      "formality": "polite | casual | academic"
    },
    "common_expressions": ["string"],
    "formatting_rules": {
      "line_breaks": "string",
      "code_blocks": "string",
      "lists": "string",
      "headings": "string"
    },
    "terminology": {
      "technical_terms": ["string"],
      "standardized_words": {
        "term": "preferred_usage"
      }
    }
  },
  "code_patterns": {
    "total_code_blocks": number,
    "average_per_article": number,
    "languages": {
      "language_name": {
        "count": number,
        "percentage": number
      }
    },
    "code_explanation_style": "string"
  },
  "platform_usage": {
    "platform_name": {
      "count": number,
      "percentage": number
    }
  },
  "intro_outro_patterns": {
    "introduction": {
      "common_starts": ["string"],
      "typical_length": "short | medium | long"
    },
    "conclusion": {
      "common_ends": ["string"],
      "typical_length": "short | medium | long"
    }
  }
}
```

## 3. Generation Modes

### 3.1 Create Mode (Initial Generation)

Use when generating skills for the first time (no existing `article_templates` or `tone_guidelines`).

**Workflow**:
1. Receive pattern extraction JSON
2. Generate `article_templates` skill from scratch
3. Generate `tone_guidelines` skill from scratch
4. Add generation metadata to all files

### 3.2 Update Mode (Merge with Existing)

Use when updating existing skills with new patterns from additional articles.

**Workflow**:
1. Check if `article_templates` and `tone_guidelines` exist
2. Read existing skill files
3. Merge new patterns with existing content
4. Preserve custom modifications (marked with `# CUSTOM` comments)
5. Update version numbers
6. Add update metadata

## 4. article_templates Skill Generation

### 4.1 Generate skill.md

**Output Location**: `.claude/skills/article_templates/skill.md`

**File Structure**:

```markdown
---
name: article_templates
description: A collection of templates supporting article outline design. Generated by article-skill-generator based on {total_articles} analyzed articles. Last updated: {date}.
---

# Article Structure Templates (Skill)

<!-- Generated by article-skill-generator -->
<!-- Generated at: {timestamp} -->
<!-- Based on: {total_articles} articles analyzed -->
<!-- Version: {version} -->

This skill provides templates for designing technical article structures.
Used in Phase 2 (Outline Design Phase) of the article-writer agent.

## 1. Category-Based Template Structure

Categories are generated based on your articles.

| Platform | Category | Article Count | Percentage | Template |
|----------|----------|---------------|------------|----------|
{category_table_rows}

## 2. Frontmatter Formats

### 2.1 Default Format (Platform-Agnostic)

```yaml
---
title: "Article Title"
date: "YYYY-MM-DD"
tags: ["tag1", "tag2", "tag3"]
---
```

### 2.2 Platform-Specific Formats

Refer to official documentation for platform-specific frontmatter:

**Qiita**:
- Qiita Markdown: https://qiita.com/Qiita/items/c686397e4a0f4f11683d
- Qiita CLI: https://qiita.com/Qiita/items/666e190490d0af90a92b

**Zenn**:
- Zenn CLI: https://zenn.dev/zenn/articles/zenn-cli-guide
- Zenn Markdown: https://zenn.dev/zenn/articles/markdown-guide

**Other platforms**: Use default format above.

## 3. Platform-Specific Syntax

Refer to official documentation instead of hardcoding platform-specific syntax:

- **Qiita**: https://qiita.com/Qiita/items/c686397e4a0f4f11683d
- **Zenn**: https://zenn.dev/zenn/articles/markdown-guide

## 4. Fixed Intro/Outro Templates

See `tone_guidelines/intro_outro.md` for fixed introduction and conclusion templates.

## 5. Output Format

Output outline design results in the following JSON format:

```json
{
  "platform": "qiita | zenn-article | zenn-book | other",
  "category": "string",
  "working_title": "string",
  "target_audience": "beginner | intermediate | advanced | mixed",
  "primary_goal": "string",
  "frontmatter": {
    "title": "string",
    "tags_or_topics": ["string"],
    "emoji": "string (Zenn only)",
    "type": "tech | idea (Zenn only)"
  },
  "sections": [
    {
      "id": "string",
      "title": "string",
      "goal": "string",
      "summary": "string",
      "depends_on": ["section_id"],
      "estimated_length": "short | medium | long"
    }
  ],
  "key_takeaways": ["string"],
  "prerequisites": ["string"]
}
```

## 6. Notes for Outline Design

### 6.1 Title Rules (Important)

Keep article titles short and simple.

**Prohibited Patterns**:
- Do not split titles with ":" or "："
- Avoid subtitle format ("〇〇：△△の仕組みと可能性")
- Avoid titles over 30 characters

**Recommended Patterns**:
- Good: "オンチェーンFXを実現するCircleのStableFX"
- Good: "ERC20の基本を理解する"
- Bad: "Circle StableFX：オンチェーンFXエンジンの仕組みと可能性"

### 6.2 Patterns to Avoid

- Abstract titles ("概要" or "まとめ" alone is unclear)
- Too many sections (guideline: 5-8 sections)
- Circular dependencies (avoid A→B→C→A)
- Overestimating prerequisite knowledge

### 6.3 Recommended Patterns

- Specific titles ("ERC20のapprove関数を理解する")
- Appropriate number of sections (5-8 sections)
- Clear dependencies (linear or tree structure)
- Gradual difficulty (basics first, advanced later)

## 7. Related Skills

- `pattern_extraction` - Used to extract patterns for this skill
- `tone_guidelines` - Used in writing phase
```

**Dynamic Content Generation**:

- `{category_table_rows}`: Generate from `categories` array in input JSON
- `{total_articles}`: From `analysis_metadata.total_articles`
- `{timestamp}`: Current timestamp
- `{version}`: Start with 1.0, increment for updates

### 4.2 Generate Category Templates

**Output Location**: `.claude/skills/article_templates/templates/{platform}/{category}.md`

**For each category** in the input JSON, generate a template file:

```markdown
# {Category Name} Template ({Platform})

<!-- Generated by article-skill-generator -->
<!-- Generated at: {timestamp} -->
<!-- Article count: {article_count} ({percentage}%) -->

{article_count} articles analyzed. This template captures common patterns.

## Metadata

(Platform-specific frontmatter example - refer to official docs)

## Article Structure

### 1. Introduction (Fixed)

See tone_guidelines/intro_outro.md for the fixed introduction template.

{for each section in section_patterns}
### {section_number}. {Section Name}

**Purpose**: {inferred from common patterns}
**Typical Content**: {inferred from analysis}
**Length Guide**: {inferred from average_sections}

{end for}

### {last_section}. Conclusion (Fixed)

See tone_guidelines/intro_outro.md for the fixed conclusion template.

## Writing Rules

### Category-Specific Rules

{inferred from category patterns}

## Checklist

- [ ] Metadata format is correct
- [ ] Introduction/Conclusion follows fixed template
- [ ] All required sections are included
- [ ] Section flow is logical
```

**Dynamic Content**:
- `{section_patterns}`: From category's `section_patterns` array
- Infer section purposes from common patterns
- Use `average_sections` to determine length guides

## 5. tone_guidelines Skill Generation

### 5.1 Generate skill.md

**Output Location**: `.claude/skills/tone_guidelines/skill.md`

**File Structure**:

```markdown
---
name: tone_guidelines
description: Tone and style guidelines for writing technical articles. Generated by article-skill-generator based on {total_articles} analyzed articles. Last updated: {date}.
---

# Tone and Style Guidelines (Skill)

<!-- Generated by article-skill-generator -->
<!-- Generated at: {timestamp} -->
<!-- Based on: {total_articles} articles analyzed -->
<!-- Version: {version} -->

This skill provides guidelines for tone and style when writing technical articles.
Used in Phase 3 (Writing Phase) of the article-writer agent.

## Included Files

This skill consists of the following files.

**format_rules.md**
Detailed formatting rules (line breaks, code blocks, lists, URLs, etc.)

**wordings.md**
Terminology standardization and writing style rules

**intro_outro.md**
Fixed introduction and conclusion templates

## Key Principles

### Public Article Principles (Most Important)

All articles and Books are published externally.
Never include local file paths (`.claude/skills/...`, `/Users/...`), internal work notes, or project-specific internal information.
When references are needed, use official documentation or GitHub URLs that readers can access.
Always ask yourself "Is this information valuable to readers?"

### Title Rules

Keep article titles short and simple, aiming for under 30 characters.
Avoid subtitle formats that split titles with ":" or "：".

### Writing Style Rules

Use **{writing_style.form}** form consistently.

| Type | Recommended | Prohibited |
|------|-------------|------------|
| Explanations | {based on tone_patterns} | {based on tone_patterns} |
| Addressing readers | {based on tone_patterns} | {based on tone_patterns} |
| Technical facts | Clear assertions | Vague expressions |

### Platform-Specific Differences

Refer to official documentation for platform-specific syntax:

- **Qiita**: https://qiita.com/Qiita/items/c686397e4a0f4f11683d
- **Zenn**: https://zenn.dev/zenn/articles/markdown-guide

## Quality Checklist

After writing, verify the following.

| Category | Check Items |
|----------|-------------|
| Writing style | {generated from tone_patterns} |
| Format | {generated from formatting_rules} |
| Prohibited | No local file paths |
| Headings | {generated from formatting_rules.headings} |
| Code elements | {generated from code_patterns} |
| Platform | {platform-specific rules from official docs} |

## Related Skills

`pattern_extraction` is used to generate this skill.
`article_templates` is used in the outline design phase.
```

### 5.2 Generate format_rules.md

**Output Location**: `.claude/skills/tone_guidelines/format_rules.md`

```markdown
# Formatting Rules

<!-- Generated by article-skill-generator -->
<!-- Generated at: {timestamp} -->
<!-- Version: {version} -->

## Line Breaks

{formatting_rules.line_breaks}

## Code Blocks

{formatting_rules.code_blocks}

**Language Usage**:
{generated from code_patterns.languages}

**Code Explanation Style**:
{code_patterns.code_explanation_style}

## Lists

{formatting_rules.lists}

## Headings

{formatting_rules.headings}

## URLs

Refer to platform-specific documentation for URL handling:
- Qiita: https://qiita.com/Qiita/items/c686397e4a0f4f11683d
- Zenn: https://zenn.dev/zenn/articles/markdown-guide
```

### 5.3 Generate wordings.md

**Output Location**: `.claude/skills/tone_guidelines/wordings.md`

```markdown
# Terminology and Writing Style

<!-- Generated by article-skill-generator -->
<!-- Generated at: {timestamp} -->
<!-- Version: {version} -->

## Common Expressions

{tone_patterns.common_expressions as list}

## Terminology Standardization

{tone_patterns.terminology.standardized_words as table}

## Technical Terms

{tone_patterns.terminology.technical_terms as list}

## Writing Style

**Form**: {writing_style.form}
**Formality**: {writing_style.formality}
```

### 5.4 Generate intro_outro.md

**Output Location**: `.claude/skills/tone_guidelines/intro_outro.md`

```markdown
# Fixed Introduction and Conclusion Templates

<!-- Generated by article-skill-generator -->
<!-- Generated at: {timestamp} -->
<!-- Version: {version} -->

## Introduction Template

**Common starts** (from analyzed articles):
{intro_outro_patterns.introduction.common_starts as list}

**Typical length**: {intro_outro_patterns.introduction.typical_length}

**Template**:
```markdown
# CUSTOM: Edit this template to match your style
はじめに

{Topic placeholder}について説明します。

{Your custom introduction pattern}
```

## Conclusion Template

**Common ends** (from analyzed articles):
{intro_outro_patterns.conclusion.common_ends as list}

**Typical length**: {intro_outro_patterns.conclusion.typical_length}

**Template**:
```markdown
# CUSTOM: Edit this template to match your style
最後に

{Summary placeholder}

{Your custom conclusion pattern}
```

**Note**: Sections marked with `# CUSTOM` will be preserved during skill updates.
```

## 6. Update Mode (Merging Strategy)

### 6.1 Check for Existing Skills

Before generation:
1. Check if `.claude/skills/article_templates/skill.md` exists
2. Check if `.claude/skills/tone_guidelines/skill.md` exists
3. If both exist → Use Update Mode
4. If neither exists → Use Create Mode
5. If only one exists → Warn user and use Create Mode

### 6.2 Merge Strategy for article_templates

**skill.md**:
- Update category table (add new categories, update counts for existing)
- Preserve all other content
- Increment version number

**Category Templates**:
- For each new category → Create new template file
- For each existing category:
  - Read existing template
  - Merge section patterns (add new sections, update existing)
  - Preserve content marked with `# CUSTOM`
  - Update article count and percentage
  - Update timestamp

### 6.3 Merge Strategy for tone_guidelines

**skill.md**:
- Update metadata (article count, date)
- Preserve all content
- Increment version number

**format_rules.md**:
- Merge new formatting rules
- Preserve `# CUSTOM` sections
- Update timestamp

**wordings.md**:
- Add new common expressions
- Add new technical terms
- Update standardized words (merge with existing)
- Preserve `# CUSTOM` sections

**intro_outro.md**:
- Update common starts/ends lists (merge, keep unique)
- **Preserve all content in template sections** (never overwrite custom templates)
- Only update metadata

### 6.4 Version Numbering

**Versioning Rules**:
- Major version (X.0): Complete regeneration or significant structural changes
- Minor version (X.Y): Adding new categories, new rules, or incremental updates

**Current version detection**:
```markdown
<!-- Version: 1.2 -->
```

**Version increment logic**:
- If adding ≥3 new categories → Major version bump
- If adding <3 new categories or updating rules → Minor version bump

## 7. Custom Content Preservation

Content marked with `# CUSTOM` comments will be preserved during updates:

```markdown
# CUSTOM: This section is manually customized
{Your custom content here}
# END CUSTOM
```

**Preservation Rules**:
- Everything between `# CUSTOM` and `# END CUSTOM` is preserved
- Single-line `# CUSTOM` comments preserve the entire section until next heading
- Custom intro/outro templates are always preserved

## 8. Output Summary

After generation, provide a detailed summary:

```
## Generated Skills

### article_templates
Location: .claude/skills/article_templates/
Status: {Created | Updated}
Version: {version}

Files:
- skill.md (updated)
- templates/
  {for each platform}
  - {platform}/
    {for each category}
    - {category}.md ({new | updated})

Statistics:
- Total categories: {count}
- New categories: {count}
- Updated categories: {count}
- Articles analyzed: {total_articles}

### tone_guidelines
Location: .claude/skills/tone_guidelines/
Status: {Created | Updated}
Version: {version}

Files:
- skill.md (updated)
- format_rules.md (updated)
- wordings.md (updated)
- intro_outro.md (preserved/updated)

Statistics:
- Total formatting rules: {count}
- Total common expressions: {count}
- Total technical terms: {count}
- Custom sections preserved: {count}

### Next Steps
1. Review generated skills in `.claude/skills/`
2. Customize intro/outro templates in `tone_guidelines/intro_outro.md` (marked with # CUSTOM)
3. Run article-writer agent to create articles using these skills
```

## 9. Error Handling

**Missing Required Fields**:
- If input JSON is missing required fields, report error with specific field names
- Suggest re-running pattern_extraction skill

**Empty Categories**:
- If no categories found, create a generic "Other" category
- Warn user that more articles are needed for better categorization

**File Write Errors**:
- Report which files failed to write
- Suggest checking file permissions
- Provide partial results if possible

## 10. Related Skills

- **pattern_extraction** - Provides input data for this skill
- **article_templates** (generated) - Used by article-writer agent
- **tone_guidelines** (generated) - Used by article-writer agent
